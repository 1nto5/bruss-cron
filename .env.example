# bruss-cron environment variables
# Copy to .env and fill in real values
#
# Plant legend:
#   [ALL]       — Required for all plants
#   [MRG]       — Required only for mrg (Mrągowo), unused on bri
#   [MRG-only]  — Feature disabled on bri via PLANT config, variable ignored
#   [optional]  — Has sensible default, override if needed
#
# BRI (PLANT=bri) enables only: dmcheck, sync, backup-monitors
# MRG (PLANT=mrg) enables all:  dmcheck, sync, backup-monitors, deviations, overtime, oven, hr-training

# ===========================================
# Core [ALL]
# ===========================================

NODE_ENV=production
PLANT=mrg                              # 'mrg' (all features) | 'bri' (dmcheck + sync + backups only)
DEFAULT_LOCALE=pl

# ===========================================
# Database [ALL]
# ===========================================

MONGO_URI=mongodb://127.0.0.1/next_bruss

# ===========================================
# bruss-intra Connection [ALL]
# ===========================================

APP_URL=https://app.example.com        # bruss-intra URL (for links in emails)
API_URL=https://app.example.com/api    # bruss-intra mailer API endpoint

# ===========================================
# Notifications [ALL]
# ===========================================

ADMIN_EMAIL=admin@example.com          # Receives error/status reports

# ===========================================
# Health Check [optional]
# ===========================================

HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PORT=3001

# ===========================================
# LDAP Sync [ALL] — feature: sync
# ===========================================
# Syncs AD users to the `users` collection.
# Runs on both mrg and bri (sync feature enabled for both).

# Uncomment the correct line for your plant:
# LDAP=ldap://10.21.10.171:3268        # BRI (Brieselang / HOI)
LDAP=ldap://10.27.10.171:3268          # MRG (Mrągowo)
LDAP_DN=CN=NextAuth,OU=SERVICEUSER,OU=_BRUSS-GROUP,DC=bruss-group,DC=com
LDAP_PASS=
LDAP_BASE_DN=DC=bruss-group,DC=com

# ===========================================
# R2Platnik SQL Sync [ALL] — feature: sync
# ===========================================
# Syncs employees from HR SQL database to the `employees` collection.
# Runs on both mrg and bri.

R2PLATNIK_SQL_SERVER=                  # e.g. SRV-MRG-HR (may differ per plant)
R2PLATNIK_SQL_DATABASE=R2P_platnik10_dane_1
R2PLATNIK_SQL_INSTANCE=PLATNIK
R2PLATNIK_SQL_USER=
R2PLATNIK_SQL_PASSWORD=

# ===========================================
# Synology Backup Monitoring [ALL] — feature: backup-monitors
# ===========================================
# Runs on both mrg and bri. Verify NAS IP per plant.

SYNOLOGY_IP=                           # NAS IP (plant-specific)
SYNOLOGY_BACKUP_USER=
SYNOLOGY_BACKUP_PASS=

SMB_LV1_MONITOR_PATH=lv1_backup/logs
SMB_LV2_MONITOR_PATH=lv2_backup/logs
SMB_EOL308_MONITOR_PATH=m308_backup/logs
SMB_SQL_LV1_MONITOR_PATH=lv1_backup/logs
SMB_SQL_LV2_MONITOR_PATH=lv2_backup/logs
SMB_STALE_THRESHOLD_HOURS=24

# ===========================================
# Oven Temperature Monitoring [MRG-only] — feature: oven
# ===========================================
# Disabled on bri (no oven hardware). Variable ignored if PLANT=bri.

CONTROLLINO_API_KEY=

# ===========================================
# HR Training Evaluation [MRG-only] — feature: hr-training
# ===========================================
# Disabled on bri. Variables ignored if PLANT=bri.

HR_EMAIL=
HR_TRAINING_EXCEL_FILE_PATH=           # Path to training Excel on server
HR_TRAINING_DEADLINE_COLUMN=Z
HR_TRAINING_NAME_COLUMN=W
HR_TRAINING_TRAINING_NAME_COLUMN=C
HR_TRAINING_TRAINEE_NAME_COLUMN=J
HR_TRAINING_SHEET_NAME=Plan Realizacja Ocena
HR_TRAINING_EVALUATION_RESULT_COLUMN=AC

# ===========================================
# Power BI [optional] — feature: dmcheck
# ===========================================
# Defects CSV output path. Default: ./data/powerbi-dmcheck-defects.csv

# POWERBI_CSV_PATH=

# ===========================================
# PM2 Logs [optional]
# ===========================================
# Default: C:\ProgramData\pm2\home\logs (Windows)

# PM2_LOG_DIR=
